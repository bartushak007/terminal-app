(this["webpackJsonpterminal-app"]=this["webpackJsonpterminal-app"]||[]).push([[0],{13:function(e,t,n){e.exports={history:"terminal_history__31w77",commandLineForm:"terminal_commandLineForm__2BWgp",commandLine:"terminal_commandLine__2mL9g",errorInCommand:"terminal_errorInCommand__vksEP",successCommand:"terminal_successCommand__3gtSo",isLoading:"terminal_isLoading__SvL-A",loader:"terminal_loader__EAEuj",rotating:"terminal_rotating__LAXfc"}},33:function(e,t,n){e.exports=n(47)},38:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a,r=n(1),c=n.n(r),o=n(21),s=n.n(o),i=(n(38),n(13)),u=n.n(i),l=n(30),m=n(19),b=n(12),j=n(11),f=n.n(j),O=function(e,t){var n=e.date,a=e.title,r=e.currency,c=e.amount;return"".concat(t?"":"".concat(n,"\n ")).concat(c," ").concat(r," ").concat(a,"\n")},d=n(7),p=n.n(d),v=n(8),E=n(20),x=n(5),h=n(50),_=n(49),C=n(4),w=p.a.mark(X),y=p.a.mark(G),L=p.a.mark(B),g=p.a.mark(V),S=p.a.mark(W),k=Object(h.a)("UPDATE_HISTORY"),T=Object(h.a)("GET_CURRENCIES"),Y=Object(h.a)("SET_CURRENCIES"),D=Object(h.a)("SET_SUCCESS"),I=Object(h.a)("UPDATE_EXPENSES"),N=Object(h.a)("CLEAR_EXPENSES"),U=Object(h.a)("GET_TOTAL"),A=Object(_.a)((a={},Object(v.a)(a,k,(function(e,t){var n=t.payload;return Object(x.a)(Object(x.a)({},e),{},{history:[].concat(Object(E.a)(e.history),[n])})})),Object(v.a)(a,T,(function(e){return Object(x.a)(Object(x.a)({},e),{},{load:!0})})),Object(v.a)(a,Y,(function(e,t){var n=t.payload;return Object(x.a)(Object(x.a)({},e),{},{currencies:n.currencies,rates:n.rates,baseValute:n.base})})),Object(v.a)(a,D,(function(e){return Object(x.a)(Object(x.a)({},e),{},{load:!1})})),Object(v.a)(a,I,(function(e,t){var n=t.payload;return Object(x.a)(Object(x.a)({},e),{},{expenses:Object(x.a)(Object(x.a)({},e.expenses),{},Object(v.a)({},n.date,[].concat(Object(E.a)(e.expenses[n.date]||[]),[n])))})})),Object(v.a)(a,N,(function(e,t){var n=t.payload,a=Object.entries(e.expenses).filter((function(e){var t=Object(m.a)(e,1)[0];return f()(t).format("YYYY-MM-DD")!==f()(n).format("YYYY-MM-DD")}));return Object(x.a)(Object(x.a)({},e),{},{expenses:Object.fromEntries(a)})})),Object(v.a)(a,U,(function(e){return Object(x.a)({},e)})),a),{history:[],currencies:[],rates:[],baseValute:"EUR",load:!1,expenses:{}}),R=function(e){return e.terminal.history},H=function(e){return e.terminal.load},M=function(e){return e.terminal.currencies},P=function(e){return e.terminal.expenses},F=function(e){return e.terminal.rates};function X(){var e,t,n,a;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(C.b)(fetch,"http://data.fixer.io/api/latest?access_key=f0ba8e209927e01e8bfa04b63dbf37fc&format=1");case 3:return e=r.sent,r.next=6,e.json();case 6:return t=r.sent,n=t.rates,a=t.base,r.next=11,Object(C.d)(Y({currencies:Object.keys(n),rates:n,base:a}));case 11:r.next=17;break;case 13:return r.prev=13,r.t0=r.catch(0),r.next=17,Object(C.d)(k({text:"fetch error http://data.fixer.io/api/latest",error:!0}));case 17:return r.next=19,Object(C.d)(D());case 19:case"end":return r.stop()}}),w,null,[[0,13]])}function G(e){var t,n,a,r;return p.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.date,t.title,c.next=3,Object(C.e)(P);case 3:return a=c.sent,r=a[n],c.next=7,Object(C.c)(0);case 7:return c.next=9,Object(C.d)(k({text:r.map(O).join(" ")}));case 9:case"end":return c.stop()}}),y)}function B(){var e;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(C.e)(P);case 2:return e=t.sent,t.next=5,Object(C.c)(0);case 5:return t.next=7,Object(C.d)(k({text:Object.values(e).map((function(e){return e.map(O).join(" ")})).join(" ")}));case 7:case"end":return t.stop()}}),L)}function V(e){var t,n,a,r,c,o,s;return p.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,i.next=3,Object(C.e)(P);case 3:return n=i.sent,i.next=6,Object(C.e)(F);case 6:return a=i.sent,r=Object.values(n),c=r.reduce((function(e,t){return[].concat(Object(E.a)(e),Object(E.a)(t))}),[]).reduce((function(e,t){var n=t.amount,a=t.currency.toUpperCase();return Object(x.a)(Object(x.a)({},e),{},Object(v.a)({},a,+(e[a]||0)+ +n))}),{}),o=Object.entries(c).reduce((function(e,t){var n=Object(m.a)(t,2),r=n[0];return e+n[1]/a[r]}),0),s=o*a[t],i.next=13,Object(C.c)(0);case 13:return i.next=15,Object(C.d)(k({text:"Total ".concat(s," ").concat(t)}));case 15:case"end":return i.stop()}}),g)}function W(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.a)([Object(C.f)("GET_CURRENCIES",X),Object(C.f)("UPDATE_EXPENSES",G),Object(C.f)("CLEAR_EXPENSES",B),Object(C.f)("GET_TOTAL",V)]);case 2:case"end":return e.stop()}}),S)}var $=function(){var e=Object(b.b)(),t=Object(r.useState)(""),n=Object(m.a)(t,2),a=n[0],c=n[1];Object(r.useEffect)((function(){e(T())}),[]);var o=Object(b.c)(R),s=Object(b.c)(H),i=Object(b.c)(M),u=Object(b.c)(P),j=function(t){return e(k(t))};return{setHistory:j,onChangeHandler:function(e){var t=e.target.value;return c(t)},submitHandler:function(t){t.preventDefault();var n=a.split(" "),r=!1;switch(n[0].toLowerCase()){case"add":!(r=!function(e,t,n){try{return!!(t.some((function(t){return t===e[0].toLowerCase()}))&&f()(e[1].toLowerCase()).isValid()&&/^[\d]*[.]?[\d]*$/.test(e[2].toLowerCase())&&n.includes(e[3].toUpperCase())&&e[4].toLowerCase())}catch(a){return!1}}(n,["add","list"],i))&&function(t){var n=Object(l.a)(t),a=(n[0],n[1]),r=n[2],c=n[3],o=n.slice(4);e(I({date:f()(a).format("YYYY-MM-DD"),amount:r,currency:c,title:o.join(" ")}))}(n);break;case"list":setTimeout((function(){return j({text:Object.values(u).map((function(e){return e.map(O).join(" ")})).join(" ")})}),0);break;case"clear":u[f()(n[1].toLowerCase()).format("YYYY-MM-DD")]?e(N(n[1].toLowerCase())):r=!0;break;case"total":i.includes(n[1].toUpperCase())?e(U(n[1].toUpperCase())):r=!0;break;default:r=!0}j({text:a,isCommand:!0,hasError:r}),c("")},fillInputFromHistory:function(e){var t=o.filter((function(e){var t=e.isCommand,n=e.hasError;return t&&!n}));38===e.keyCode&&t.length&&t[t.length-1]&&c(t[t.length-1].text)},terminalInput:a,setTerminalInput:c,history:o,isLoading:s,currencies:i}},J=function(){var e=$(),t=e.onChangeHandler,n=e.submitHandler,a=e.fillInputFromHistory,r=e.terminalInput,o=e.history,s=e.isLoading;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"".concat(u.a.history," ").concat(s?u.a.isLoading:"")},c.a.createElement("div",{className:u.a.loader}),o.map((function(e,t){var n=e.text,a=e.isCommand,r=e.hasError;return c.a.createElement("pre",{className:r?u.a.errorInCommand:!r&&a?u.a.successCommand:"",key:t},a?"> ":" ",n)})),c.a.createElement("form",{onKeyDown:a,onSubmit:n,className:u.a.commandLineForm},"$",c.a.createElement("input",{className:u.a.commandLine,type:"text",value:r,onChange:t}))))};var K=function(){return c.a.createElement("div",{className:"App relative fullscreenHeight"},c.a.createElement(J,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var q=n(10),z=n(32),Q=Object(q.c)({terminal:A}),Z=p.a.mark(ee);function ee(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.a)([W()]);case 2:case"end":return e.stop()}}),Z)}var te=Object(z.a)(),ne=Object(q.e)(Q,{},Object(q.a)(te));te.run(ee);var ae=ne;s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(b.a,{store:ae},c.a.createElement(K,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.7e647f84.chunk.js.map