(this["webpackJsonpterminal-app"]=this["webpackJsonpterminal-app"]||[]).push([[0],{14:function(e,t,a){e.exports={history:"terminal_history__31w77",commandLineForm:"terminal_commandLineForm__2BWgp",commandLine:"terminal_commandLine__2mL9g",errorInCommand:"terminal_errorInCommand__vksEP",successCommand:"terminal_successCommand__3gtSo",isLoading:"terminal_isLoading__SvL-A",loader:"terminal_loader__EAEuj",rotating:"terminal_rotating__LAXfc"}},33:function(e,t,a){e.exports=a(47)},38:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n,r=a(1),c=a.n(r),o=a(21),s=a.n(o),i=(a(38),a(14)),u=a.n(i),l=a(30),m=a(12),b=a(13),f=a(8),j=a.n(f),O=function(e,t){var a=e.date,n=e.title,r=e.currency,c=e.amount;return"".concat(t?"":"".concat(a,"\n ")).concat(c," ").concat(r," ").concat(n,"\n")},d=a(7),p=a.n(d),v=a(9),E=a(20),h=a(5),x=a(50),_=a(49),C=a(4),y=p.a.mark(B),w=p.a.mark(F),L=p.a.mark(X),S=p.a.mark(G),g=Object(x.a)("UPDATE_HISTORY"),U=Object(x.a)("GET_CURRENCIES"),k=Object(x.a)("SET_CURRENCIES"),T=Object(x.a)("SET_SUCCESS"),Y=Object(x.a)("UPDATE_EXPENSES"),D=Object(x.a)("CLEAR_EXPENSES"),N=Object(x.a)("GET_TOTAL"),R=Object(_.a)((n={},Object(v.a)(n,g,(function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{history:[].concat(Object(E.a)(e.history),[a])})})),Object(v.a)(n,U,(function(e){return Object(h.a)(Object(h.a)({},e),{},{load:!0})})),Object(v.a)(n,k,(function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{currencies:a.currencies,rates:a.rates,baseValute:a.base})})),Object(v.a)(n,T,(function(e){return Object(h.a)(Object(h.a)({},e),{},{load:!1})})),Object(v.a)(n,Y,(function(e,t){var a=t.payload;return Object(h.a)(Object(h.a)({},e),{},{expenses:Object(h.a)(Object(h.a)({},e.expenses),{},Object(v.a)({},a.date,[].concat(Object(E.a)(e.expenses[a.date]||[]),[a])))})})),Object(v.a)(n,D,(function(e,t){var a=t.payload,n=Object.entries(e.expenses).filter((function(e){var t=Object(m.a)(e,1)[0];return j()(t).format("YYYY-MM-DD")!==j()(a).format("YYYY-MM-DD")}));return Object(h.a)(Object(h.a)({},e),{},{expenses:Object.fromEntries(n)})})),Object(v.a)(n,N,(function(e){return Object(h.a)({},e)})),n),{history:[],currencies:["EUR","PLN","USD","UAH","RUB"],rates:{EUR:1,PLN:4.463731,USD:1.117735,UAH:29.88044,RUB:77.598202},baseValute:"EUR",load:!1,expenses:{}}),A=function(e){return e.terminal.history},I=function(e){return e.terminal.load},H=function(e){return e.terminal.currencies},P=function(e){return e.terminal.expenses},M=function(e){return e.terminal.rates};function B(){var e,t,a,n;return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(C.b)(fetch,"http://data.fixer.io/api/latest?access_key=f0ba8e209927e01e8bfa04b63dbf37fc&format=1");case 3:return e=r.sent,r.next=6,e.json();case 6:return t=r.sent,a=t.rates,n=t.base,r.next=11,Object(C.d)(k({currencies:Object.keys(a),rates:a,base:n}));case 11:r.next=17;break;case 13:return r.prev=13,r.t0=r.catch(0),r.next=17,Object(C.d)(g({text:"fetch error http://data.fixer.io/api/latest\n available default currencies EUR, PLN, USD, UAH, RUB as of June 20, 2020",error:!0}));case 17:return r.next=19,Object(C.d)(T());case 19:case"end":return r.stop()}}),y,null,[[0,13]])}function F(){var e;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(C.e)(P);case 2:return e=t.sent,t.next=5,Object(C.c)(0);case 5:return t.next=7,Object(C.d)(g({text:Object.values(e).sort((function(e,t){var a=Object(m.a)(e,1)[0].date,n=Object(m.a)(t,1)[0].date;return j()(a).valueOf()-j()(n).valueOf()})).map((function(e){return e.map(O).join(" ")})).join(" ")}));case 7:case"end":return t.stop()}}),w)}function X(e){var t,a,n,r,c,o,s;return p.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,i.next=3,Object(C.e)(P);case 3:return a=i.sent,i.next=6,Object(C.e)(M);case 6:return n=i.sent,r=Object.values(a),c=r.reduce((function(e,t){return[].concat(Object(E.a)(e),Object(E.a)(t))}),[]).reduce((function(e,t){var a=t.amount,n=t.currency.toUpperCase();return Object(h.a)(Object(h.a)({},e),{},Object(v.a)({},n,+(e[n]||0)+ +a))}),{}),o=Object.entries(c).reduce((function(e,t){var a=Object(m.a)(t,2),r=a[0];return e+a[1]/n[r]}),0),s=o*n[t],i.next=13,Object(C.c)(0);case 13:return i.next=15,Object(C.d)(g({text:"Total ".concat(s," ").concat(t)}));case 15:case"end":return i.stop()}}),L)}function G(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.a)([Object(C.f)("GET_CURRENCIES",B),Object(C.f)("UPDATE_EXPENSES",F),Object(C.f)("CLEAR_EXPENSES",F),Object(C.f)("GET_TOTAL",X)]);case 2:case"end":return e.stop()}}),S)}var J=function(){var e=Object(b.b)(),t=Object(r.useState)(""),a=Object(m.a)(t,2),n=a[0],c=a[1];Object(r.useEffect)((function(){e(U())}),[]);var o=Object(b.c)(A),s=Object(b.c)(I),i=Object(b.c)(H),u=Object(b.c)(P),f=function(t){return e(g(t))};return{setHistory:f,onChangeHandler:function(e){var t=e.target.value;return c(t)},submitHandler:function(t){t.preventDefault();var a=n.trim().split(" "),r=!1;switch(a[0].toLowerCase()){case"add":!(r=!function(e,t,a){try{return!!(t.some((function(t){return t===e[0].toLowerCase()}))&&j()(e[1].toLowerCase()).isValid()&&/^[\d]*[.]?[\d]*$/.test(e[2].toLowerCase())&&a.includes(e[3].toUpperCase())&&e[4].toLowerCase())}catch(n){return!1}}(a,["add"],i))&&function(t){var a=Object(l.a)(t),n=(a[0],a[1]),r=a[2],c=a[3],o=a.slice(4);e(Y({date:j()(n).format("YYYY-MM-DD"),amount:r,currency:c,title:o.join(" ")}))}(a);break;case"list":setTimeout((function(){return f({text:Object.values(u).sort((function(e,t){var a=Object(m.a)(e,1)[0].date,n=Object(m.a)(t,1)[0].date;return j()(a).valueOf()-j()(n).valueOf()})).map((function(e){return e.map(O).join(" ")})).join(" ")})}),0);break;case"clear":u[j()(a[1].toLowerCase()).format("YYYY-MM-DD")]?e(D(a[1].toLowerCase())):r=!0;break;case"total":i.includes(a[1].toUpperCase())?e(N(a[1].toUpperCase())):r=!0;break;default:r=!0}f({text:n,isCommand:!0,hasError:r}),c("")},fillInputFromHistory:function(e){var t=o.filter((function(e){var t=e.isCommand,a=e.hasError;return t&&!a}));38===e.keyCode&&t.length&&t[t.length-1]&&c(t[t.length-1].text)},terminalInput:n,setTerminalInput:c,history:o,isLoading:s,currencies:i}},V=function(){var e=J(),t=e.onChangeHandler,a=e.submitHandler,n=e.fillInputFromHistory,r=e.terminalInput,o=e.history,s=e.isLoading;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"".concat(u.a.history," ").concat(s?u.a.isLoading:"")},c.a.createElement("div",{className:u.a.loader}),o.map((function(e,t){var a=e.text,n=e.isCommand,r=e.hasError;return c.a.createElement("pre",{className:r?u.a.errorInCommand:!r&&n?u.a.successCommand:"",key:t},n?"> ":" ",a)})),c.a.createElement("form",{onKeyDown:n,onSubmit:a,className:u.a.commandLineForm},"$",c.a.createElement("input",{className:u.a.commandLine,type:"text",value:r,onChange:t}))))};var W=function(){return c.a.createElement("div",{className:"App relative fullscreenHeight"},c.a.createElement(V,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $=a(11),K=a(32),q=Object($.c)({terminal:R}),z=p.a.mark(Q);function Q(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.a)([G()]);case 2:case"end":return e.stop()}}),z)}var Z=Object(K.a)(),ee=Object($.e)(q,{},Object($.a)(Z));Z.run(Q);var te=ee;s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(b.a,{store:te},c.a.createElement(W,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.22fc5b29.chunk.js.map